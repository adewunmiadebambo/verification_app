{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Desktop/Klinsheet/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Desktop/Klinsheet/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Desktop/Klinsheet/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import ButtonLoader from'../../../../component/buttonLoader/buttonLoader';import{useHistory}from'react-router';import{toast}from'react-toastify';/* Setting Parameter for request */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var config={headers:{\"Token\":\"74a6d2f5a88d5a864b4b93d278cefe7c\",\"Content-Type\":\"application/json\"}};/* Getting input values from input fields & setting useState   */var PvcForm=function PvcForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),pvcValue=_useState2[0],setPvcValue=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),firstName=_useState4[0],setFirstName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),lastName=_useState6[0],setLastName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),dob=_useState8[0],setDOB=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),errMsg=_useState10[0],setErrMsg=_useState10[1];var history=useHistory();var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isChecked=_useState14[0],setIsChecked=_useState14[1];var handleOnChange=function handleOnChange(){setIsChecked(!isChecked);};/* setting the parameter needed from the backend */var userData={\"report_type\":\"identity\",\"type\":\"inec\",\"reference\":pvcValue,\"last_name\":lastName,\"first_name\":firstName,\"dob\":dob,\"subject_consent\":true};/* -----------calling the Api------------------ */var verify=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _yield$axios$post,data,_data$data,_error$response,_error$response$data,_error$response2,_error$response2$data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(pvcValue.length===19)){_context.next=22;break;}setErrMsg(false);setLoading(true);_context.prev=4;_context.next=7;return axios.post('https://api.youverify.co/v1/identities/candidates/check',userData,config);case 7:_yield$axios$post=_context.sent;data=_yield$axios$post.data;console.log(data);setLoading(false);if(data.status_code===200){history.push('/valid',{userData:data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.response,idNumber:pvcValue,pageType:\"PvcForm\"});}_context.next=20;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);if((_context.t0===null||_context.t0===void 0?void 0:(_error$response=_context.t0.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.status_code)===404){history.push('/invalid');}console.log(_context.t0);setLoading(false);toast.error(_context.t0===null||_context.t0===void 0?void 0:(_error$response2=_context.t0.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message);case 20:_context.next=23;break;case 22:setErrMsg(true);case 23:case\"end\":return _context.stop();}}},_callee,null,[[4,14]]);}));return function verify(_x){return _ref.apply(this,arguments);};}();/*------------------- Verification Button --------------------------------- */function VerifyButton(){if(firstName&&lastName&&dob&&pvcValue&&pvcValue.length===19&&isChecked){return/*#__PURE__*/_jsxs(\"button\",{className:\"form-control veri_btn\",children:[loading?\" verifying\":\"verify\",loading&&/*#__PURE__*/_jsx(ButtonLoader,{}),\" \"]});}else if(loading){return/*#__PURE__*/_jsxs(\"button\",{className:\"form-control veri_btn\",disabled:true,children:[loading&&/*#__PURE__*/_jsx(ButtonLoader,{}),loading?\" verifying\":\"verify\",\" \"]});}else return/*#__PURE__*/_jsx(\"button\",{className:\"form-control noveri_btn\",disabled:true,children:\"Verify\"});}/*------------------------- Input Field------------------------------------- */return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:verify,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid form_area\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 co-12 text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input_area\",onChange:function onChange(e){return setFirstName(e.target.value);},placeholder:\"Candidate's Lastname\"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 col-12 text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input_area\",onChange:function onChange(e){return setLastName(e.target.value);},placeholder:\"Candidate's Firstname\"}),\"  \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 col-12 text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"input_area\",onChange:function onChange(e){return setDOB(e.target.value);}}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 col-12 text-center\",children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input_area\",value:pvcValue,placeholder:\"Permanent Voter's Card No \",maxLength:\"19\",onChange:function onChange(e){return setPvcValue(e.target.value);}}),\" \"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"consent-check\",className:\"col-md-1 col-1\",type:\"checkbox\",value:\"check\",checked:isChecked,onChange:handleOnChange}),/*#__PURE__*/_jsxs(\"label\",{for:\"consent-check\",className:\" col-md-11 col-11 no-select\",children:[\"By checking this box and clicking \\\"Verify Candidate\\\", you acknowledge that you have gotten consent from the data subject to use their data for verification purposes on our platform in accordance with our \\xA0\",/*#__PURE__*/_jsx(\"a\",{href:\"https://klincheck.com/cookie.php\",target:\"_blank\",children:\"Privacy Policy\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"err\",children:errMsg&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"crimson\",fontSize:\"12px\",marginTop:\"7px\"},children:\"PVC must be 11 digits\"})}),/*#__PURE__*/_jsx(VerifyButton,{})]})});};export default PvcForm;","map":{"version":3,"sources":["/Users/mac/Desktop/Klinsheet/src/pages/Homepage/IdTypes/pvc/pvcForm.jsx"],"names":["React","useState","axios","ButtonLoader","useHistory","toast","config","headers","PvcForm","pvcValue","setPvcValue","firstName","setFirstName","lastName","setLastName","dob","setDOB","errMsg","setErrMsg","history","loading","setLoading","isChecked","setIsChecked","handleOnChange","userData","verify","e","preventDefault","length","post","data","console","log","status_code","push","response","idNumber","pageType","error","message","VerifyButton","target","value","color","fontSize","marginTop"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport axios from 'axios';\nimport ButtonLoader from '../../../../component/buttonLoader/buttonLoader';\nimport { useHistory } from 'react-router';\nimport { toast } from 'react-toastify';\n\n/* Setting Parameter for request */\nconst config = {\n    headers: {\n       \"Token\": \"74a6d2f5a88d5a864b4b93d278cefe7c\",\n       \"Content-Type\": \"application/json\"\n       }\n}\n/* Getting input values from input fields & setting useState   */\nconst PvcForm = () => {\n    const [pvcValue, setPvcValue] = useState(\"\");\n    const [firstName, setFirstName] = useState(\"\");\n    const [lastName, setLastName] = useState(\"\");\n    const [dob, setDOB] = useState(\"\");\n    const [errMsg, setErrMsg] = useState(false);\n    const history = useHistory();\n    const [loading, setLoading] = useState(false);\n    const [isChecked, setIsChecked] = useState(false);\n    const handleOnChange = () => {\n        setIsChecked(!isChecked);\n      };\n\n    \n/* setting the parameter needed from the backend */\n    const userData = { \n        \"report_type\": \"identity\", \n        \"type\": \"inec\", \n        \"reference\": pvcValue,\n        \"last_name\": lastName,\n        \"first_name\": firstName,\n        \"dob\": dob,\n        \"subject_consent\": true \n       }\n/* -----------calling the Api------------------ */\n       const verify = async (e) => {\n           e.preventDefault()\n           if (pvcValue.length ===19) {\n               setErrMsg(false)\n               setLoading(true)\n               try {\n                const {data} = await axios.post('https://api.youverify.co/v1/identities/candidates/check', userData, config )\n                console.log(data)\n                setLoading(false)\n                if(data.status_code === 200) {\n                     history.push('/valid', {userData: data?.data?.response, idNumber:pvcValue, pageType:\"PvcForm\"})\n                } \n            } catch (error) {\n                if (error?.response?.data?.status_code === 404){\n                    history.push('/invalid')\n                }\n                console.log(error)\n                setLoading(false)\n                toast.error(error?.response?.data?.message)\n            }\n           } else {\n                setErrMsg(true)\n           }\n            }\n/*------------------- Verification Button --------------------------------- */\n       function VerifyButton() {\n        if (firstName && lastName && dob && pvcValue && pvcValue.length ===19 && isChecked ) {\n            return <button className=\"form-control veri_btn\" >{loading ? \" verifying\" : \"verify\"  }{loading && <ButtonLoader/>} </button>\n        } else if (loading) {return <button className=\"form-control veri_btn\" disabled >{loading && <ButtonLoader/>}{loading ? \" verifying\" : \"verify\"  } </button>\n        } else return <button className=\"form-control noveri_btn\" disabled >Verify</button>\n    }\n/*------------------------- Input Field------------------------------------- */\n    return (\n        <div>\n            <form onSubmit={verify}>\n            <div className=\"container-fluid form_area\">\n                     <div className=\"row\">\n                         <div className=\"col-md-6 co-12 text-center\"><input type=\"text\" className=\"input_area\"  onChange={e => setFirstName(e.target.value)} placeholder=\"Candidate's Lastname\"/> </div>\n                         <div className=\"col-md-6 col-12 text-center\"><input type=\"text\" className=\"input_area\"  onChange={e => setLastName(e.target.value)} placeholder=\"Candidate's Firstname\"/>  </div>\n                    </div>\n\n                        <div className=\"row\">\n                        <div className=\"col-md-6 col-12 text-center\"><input type=\"date\" className=\"input_area\"  onChange={e => setDOB(e.target.value)} /> </div>\n                        <div className=\"col-md-6 col-12 text-center\"> <input type=\"text\" className=\"input_area\"  value={pvcValue} placeholder=\"Permanent Voter's Card No \" maxLength=\"19\" onChange={(e)=> setPvcValue(e.target.value)} /> </div>\n                        </div>\n                        </div>\n\n                        <div className=\"row\">\n                         <input id=\"consent-check\" className=\"col-md-1 col-1\" type=\"checkbox\" value=\"check\" checked={isChecked} onChange={handleOnChange}></input>\n                         <label for=\"consent-check\" className=\" col-md-11 col-11 no-select\">\n                                By checking this box and clicking \"Verify Candidate\", you acknowledge\n                                that you have gotten consent from the data subject to use their data\n                                for verification purposes on our platform in accordance with our &nbsp;\n                                <a href=\"https://klincheck.com/cookie.php\" target=\"_blank\">Privacy Policy</a></label>\n                        </div>\n                <div className=\"err\">{errMsg && <p style={{color: \"crimson\", fontSize: \"12px\", marginTop: \"7px\"}}>PVC must be 11 digits</p>}</div>\n                {/* <button type=\"submit\">{loading && <ButtonLoader />}verify</button> */}\n                <VerifyButton />\n            </form>\n        </div>\n    )\n}\n\nexport default PvcForm\n"]},"metadata":{},"sourceType":"module"}